"<p style='text-align: justify;'>En este artículo sentaremos las bases para explorar la toma de decisiones de inversión aplicando mecanismos de la lógica difusa, el objetivo es comprender mejor qué es la lógica difusa para:</p><ul style='text-align: justify;'><li>Buscar una mejor aproximación a la toma de decisiones, en particular decisiones financieras.</li><li>Abstraer mecanismos de toma de decisiones más similares a la humana (que tengan en cuenta información difusa, veremos esto más adelante).</li><li>Tomar decisiones en entornos cambiantes con reglas de decisión poco claras y que pueden cambiar en el tiempo.</li><li>Determinar en qué, cuánto y cuándo invertir.</li></ul><p style='text-align: justify;'>Primero debemos definir qué es la lógica difusa y qué ventajas aporta frente a la lógica matemática clásica. Para ello empezaremos viendo como trabaja la lógica clásica. Esta define 2 valores de verdad (cierto Τ / falso ⊥) y establece un conjunto de operaciones (unión, intersección, diferencia, etc.) para operar con variables lógicas que pueden ciertas o falsas.</p><p style='text-align: justify;'>Veamos un ejemplo:</p><p style='text-align: justify;'><em>Por ejemplo: sea H la altura de una persona en cm, podemos definir 2 conjuntos: H&gt;175 y el conjunto H&lt;175. Hemos definido una variable bivalente X: X→ H&gt;175, entonces: ∀ persona, ∃ X <em>→</em> X ∈ (T ⋃ ⊥) , así dado un conjunto de persona tenemos el conjunto de X y podemos hablar de personas altas o no en función de si X es cierta o falsa. </em><em>Sin embargo, no siempre queda claro cuando una persona es alta o no, depende de con qué población se la compare. Una persona de 180 cm será alta según el ejemplo anterior, pero si todas las otras personas midieran 200 cm entonces la consideraríamos baja.</em></p><p style='text-align: justify;'>La lógica difusa intenta reducir la diferencia entre el mecanismo natural de pensamiento del hombre (donde la persona es alta o baja según con qué se la compare) y la lógica clásica (donde la persona es alta si X es cierto, es decir la persona es alta si H &gt; 175), para conseguir esto se basa en un mecanismo que se denomina <em>fuzzification.</em></p><h4 style='text-align: justify;'>Teoría básica</h4><p style='text-align: justify;'>La idea tras la lógica difusa no es determinar si la variable X es cierta o falsa, sino que se pretende determinar en que grado ∈ [0,1] es cierta. A este grado de certeza le denominamos <strong>grado de pertenencia</strong>, aunque en algunos textos se le denomina <strong>posibilidad</strong> y en este caso se suele hacer especial hincapié en la diferencia entre probabilidad (medida empírica de la frecuencia con que se repite una observación en un conjunto de medidas) y posibilidad (grado de pertenencia de una observación a un conjunto difuso), también se habla de <strong>nivel de confianza</strong> ya que es el grado en el que confiamos que la observación pertenezca al conjunto definido. El grado de pertenencia se asigna mediante la función de pertenencia (<em>f : X → R</em>) , por ejemplo:</p><div style='float: right; margin-left: 1em;'><img src='http://www.mathworks.es/help/fuzzy/eqn1220377150.png' alt=' width='247' height='124' /></div><div><p style='text-align: justify;'>Dada la siguiente función de pertenencia al conjunto de personas altas y una persona con una altura de 180 cm, considerando que personas por encima de 200 cm tienen un grado de pertenencia de 1 (son altas sin duda) y por debajo de 120 cm el grado de pertenencia es 0 (no son altas sin duda), tenemos que a = 120 y b = 200 y con x ∈ (100,220), entonces:</p></div><p style='text-align: justify;'><a href='http://quantdare.files.wordpress.com/2014/03/smf1.png'><img class='alignnone wp-image-200 size-large' src='http://quantdare.files.wordpress.com/2014/03/smf1.png?w=605' alt='smf' width='605' height='327' /></a></p><p style='text-align: justify;'>Esa persona tendrá una posibilidad de pertenencia al conjunto de personas altas de 0.875.</p><p style='text-align: justify;'>El proceso de <em>fuzzification</em> consiste en determinar la posibilidad de pertenencia al <strong>conjunto difuso</strong>, podemos definir entonces el conjunto difuso como el conjunto de observaciones sobre las que se aplica la misma función de pertenencia, este concepto también aparece en los textos como <strong>número difuso</strong> , y al igual que en la lógica clásica, el conjunto lleva asociada un álgebra que nos permite definir ciertas operaciones entre conjuntos difusos, estas operaciones son:</p><div style='display: inline-block; margin-right: 1.5em; width: 46%;'><table style='margin-top: 0;'><tbody><tr><th style='padding: .4em;'></th><th style='padding: .4em;'>Classic</th><th style='padding: .4em;'>Fuzzy</th></tr><tr><td style='padding: .4em;'>OR:</td><td style='padding: .4em;'>A ⋃ B</td><td style='padding: .4em;'>Max(A,B)</td></tr><tr><td style='padding: .4em;'>AND:</td><td style='padding: .4em;'>A ⋂ B</td><td style='padding: .4em;'>Min(A,B)</td></tr><tr><td style='padding: .4em;'>NOT:</td><td style='padding: .4em;'>¬ A</td><td style='padding: .4em;'>1-A</td></tr></tbody></table></div><div style='display: inline-block;'><a href='http://quantdare.files.wordpress.com/2014/03/logic_graphs_2-fw.png'><img class='alignnone wp-image-349 size-medium' style='margin-right: 0;' src='http://quantdare.files.wordpress.com/2014/03/logic_graphs_2-fw.png?w=300' alt='logic_graphs_2.fw' width='300' height='115' /></a></div><p style='text-align: justify;'>Con esto ya tenemos las herramientas básicas para empezar a trabajar con lógica difusa, por un lado el proceso de <em>fuzzification,</em> asignación de un grado de pertenencia de una observación al conjunto difuso, y por otro lado las operaciones elementales con las que podremos formular enunciados lógicos más complejos.</p><h4 style='text-align: justify;'>Razonamiento difuso</h4><p style='text-align: justify;'>El siguiente paso sería buscar procedimientos para combinar los grados de confianza de distintas variables observadas y tomar una decisión en base a esto de forma similar a lo que se conoce como razonamiento lógico. Un razonamiento lógico combina 2 premisas para obtener una conclusión, de la siguiente forma:  <em>A · B → C, </em>de igual forma podemos combinar 2 números difusos para obtener una conclusión: Θ · Φ → Ψ.</p><p style='text-align: justify;'>Mientras que en el caso de la lógica clásica se combinaban los valores de verdad para obtener la conclusión, en la lógica difusa se combinan los grados de pertenencia para llegar a la conclusión que a su vez puede ser un conjunto difuso o un valor discreto. Este proceso se denomina <strong>sistema de inferencia</strong>.</p><p style='text-align: justify;'>Sin embargo si la conclusión es a su vez un conjunto difuso, el sistema de inferencia se vuelve más complejo que el razonamiento clásico. Planteemos el siguiente caso: <em>¿Cuánta propina dejar en un restaurante?</em> la propina puede ser poco o muy generosa, según la generosidad, esta variable es un conjunto difuso. Por otro lado nos basaremos en la calidad del servicio y de la comida para determinar cuánto dejaremos de propina, la calidad de ambos conceptos son también conjuntos difusos, puede ser mucha calidad o poca calidad, en definitiva tenemos las siguientes variables:</p><p style='text-align: justify;'><a href='http://quantdare.files.wordpress.com/2014/03/variables.png'><img class='aligncenter wp-image-363 size-full' src='http://quantdare.files.wordpress.com/2014/03/variables.png' alt='variables' width='507' height='116' /></a></p><div style='float: right; margin-left: 1em;'><a href='http://quantdare.files.wordpress.com/2014/03/variables2.png'><img class='alignnone wp-image-366 size-full' style='margin: 0 0 0 1em;' src='http://quantdare.files.wordpress.com/2014/03/variables2.png' alt='variables2' width='371' height='153' /></a></div><p style='text-align: justify;'>El razonamiento tendría la siguiente forma: <em>servicio · comida <em>→</em></em> propina, así para un servicio y una comida dados podemos calcular sus grados de pertenencia a sus respectivos conjuntos, como vemos a continuación:</p><p style='text-align: justify;'>En este caso para combinar ambos grados de pertenencia escogeremos la operación OR (max(0.0,0.7)), es decir en este caso 0.7. Sin embargo esto no resuelve el problema pues la variable de salida es a su vez un conjunto difuso y tenemos que decidir una cantidad concreta de propina a dejar.</p><p style='text-align: justify;'>Esto nos lleva a definir 2 etapas más en el razonamiento, la <strong><em>implicación</em> </strong>y la <strong><em>defuzzification</em></strong>.</p><div style='float: right; margin-left: 1em;'><a href='http://quantdare.files.wordpress.com/2014/03/implication.png'><img class='alignnone size-full wp-image-373' style='margin: 0 0 0 1em;' src='http://quantdare.files.wordpress.com/2014/03/implication.png' alt='implication' width='276' height='142' /></a></div><p style='text-align: justify; overflow: auto;'>La etapa de implicación consiste en combinar las premisas y el conjunto de salida, en nuestro ejemplo, teníamos: <em>servicio · comida <em>→</em></em> propina, tras la implicación: (<em>servicio · comida ) ·</em> <em>propina. C</em>omo vemos el resultado de las premisas se combina con el de la conclusión utilizando operaciones de la lógica difusa (OR, AND, NOT), dando lugar al siguiente conjunto difuso:</p><p style='text-align: justify;'>El siguiente paso es la deffuzification, consiste en tomar el valor más representativo del conjunto difuso de salida, existen varias formas de proceder, desde elegir el centroide (centro de masas del área del conjunto difuso), pasando por tomar el primer, el último o el punto intermedio máximo de la función de pertenencia de salida, etc. En definitiva consiste en tomar el valor que mayor posibilidad tiene o más representativo resulta del conjunto difuso obtenido tras la implicación.</p><p style='text-align: justify;'>El funcionamiento del razonamiento difuso recuerda al de una red neuronal en el sentido que el sistema recibe por entrada las observaciones de las premisas sobre sus conjuntos difusos y las combina para obtener una salida, por eso este sistema se denomina también <strong>ANFIS (Adaptative Neuro-Fuzzy Inference System)</strong> se suele hablar de <em>adaptative</em> porque en la práctica las funciones de pertenencia son revisadas a lo largo del tiempo y corregidas si es necesario, así como de <em>neuro</em> ya que el sistema combina funciones de entrada en una red como si de una red de neuronas se tratara.</p><p style='text-align: justify;'>En la práctica existen 2 versiones de ANFIS ampliamente extendidas, la versión de Mamdani y la de Sugeno. La descripción que hemos dado hasta del proceso de razonamiento se corresponde con la versión de Mamdani. La versión de Sugeno es similar, pero en este caso se prescinde la implicación y la deffuzification ya que la variables de salida no posee un conjunto difuso conocido. En este caso la salida es una combinación lineal de los grados de pertenencia de las premisas.</p><p style='text-align: justify;'>Aplicando uno de los dos procesos (bien la versión de Mamdani o la de Sugeno) podemos combinar un número indeterminado de variables difusas para tomar una decisión.</p><h4 style='text-align: justify;'>Aplicaciones prácticas</h4>Una vez introducidos los mecanismos de la lógica difusa, estamos en posición de aplicarlos a la toma de decisiones financieras. El primer aspecto en que aplicaremos estos procesos es en la evaluación de indicadores técnicos para invertir en un activo concreto. En una primera aproximación lo aplicaremos sobre un par de medias móviles de distinto plazo de una serie, simulando un modelos técnico de cruces de medias. Las reglas de operación del modelo son sencillas:<ul><li>Si la media movil corta &gt; media móvil larga <em><em>→</em></em> invertimos 100%</li><li>Si la media movil corta &lt; media móvil larga <em>→</em> invertimos 0%</li></ul>Como vemos el modelo se basa en la posición relativa de ambas medias para tomar una decisión. En esta primera aproximación tomaremos la distancia de ambas medias como un conjunto difuso, obteniendo las siguientes reglas difusas:<ul>	<li>Si distancia muy alta <em>→</em> invertimos mucho</li>	<li>Si distancia alta o distancia baja <em>→</em> invertimos medio</li>	<li>Si distancia muy baja <em>→</em> invertimos poco</li></ul><p style='text-align: justify;'>En próximas entradas analizaremos con mayor detalle los resultados de este método así como otras aplicaciones posibles.</p>"